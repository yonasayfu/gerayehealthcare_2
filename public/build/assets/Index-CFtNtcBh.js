import{_ as F}from"./AppLayout.vue_vue_type_style_index_0_lang-CvAaBbvn.js";import{s as C,Q as E,A as v,f as c,g as l,l as a,t as r,j as o,q as h,F as _,m as k,r as m,o as A,R as L,C as B,E as R,w as P,i as D,k as T,a as f}from"./vendor-BwD25tKZ.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-9XWwQ7Yt.js";import"./utils-CBfrqCZ4.js";import"./createContext-BqFVO7-m.js";import"./useForwardExpose-G3tvssmS.js";import"./constructNow-B9pLeBHj.js";import"./Primitive-BSXjhaNq.js";import"./format-BcfG6MxF.js";import"./VisuallyHidden-C1CaS35V.js";import"./index-CKGAZWQo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CuMZ7Rul.js";import"./debounce-Cwa4SNQ2.js";import"./app-Bm08FwIe.js";import"./charts-DOEJufVb.js";const N={class:"space-y-6"},O={class:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"},M={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},q={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},I={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},V={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},$={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},j={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},G={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},J={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},Q={class:"grid gap-4 grid-cols-1 lg:grid-cols-2"},U={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},z={class:"text-sm text-gray-700 dark:text-gray-200 list-disc list-inside space-y-1"},H={key:0,class:"text-gray-500"},K={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},W={class:"text-sm text-gray-700 dark:text-gray-200 list-disc list-inside space-y-1"},X={key:0,class:"text-gray-500"},Y={class:"p-4 rounded-lg bg-white dark:bg-gray-800 shadow"},Z={class:"text-xs overflow-auto bg-gray-50 dark:bg-gray-900 p-3 rounded text-gray-800 dark:text-gray-200"},tt=C({__name:"MarketingAnalyticsDashboard",props:{dashboardStats:{},campaignPerformanceData:{},trafficSourceData:{},conversionFunnelData:{}},setup(b){const y=b,{dashboardStats:e,campaignPerformanceData:u,trafficSourceData:g,conversionFunnelData:d}=E(y),n=v(()=>(g.value||[]).slice(0,5));return(x,s)=>(l(),c("div",N,[a("div",O,[a("div",M,[s[0]||(s[0]=a("div",{class:"text-sm text-gray-500 dark:text-gray-300"},"Total Leads",-1)),a("div",q,r(o(e).totalLeads?.toLocaleString?.()??"-"),1)]),a("div",I,[s[1]||(s[1]=a("div",{class:"text-sm text-gray-500 dark:text-gray-300"},"Converted Leads",-1)),a("div",V,r(o(e).convertedLeads?.toLocaleString?.()??"-"),1)]),a("div",$,[s[2]||(s[2]=a("div",{class:"text-sm text-gray-500 dark:text-gray-300"},"Conversion Rate",-1)),a("div",j,r((o(e).conversionRate??0)+"%"),1)]),a("div",G,[s[3]||(s[3]=a("div",{class:"text-sm text-gray-500 dark:text-gray-300"},"ROI",-1)),a("div",J,r((o(e).roi??0)+"%"),1)])]),a("div",Q,[a("div",U,[s[4]||(s[4]=a("h4",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Campaign Performance (sample)",-1)),a("ul",z,[(l(!0),c(_,null,k((o(u)||[]).slice(0,6),(i,p)=>(l(),c("li",{key:p},r(i.date??"—")+": "+r(i.impressions??0)+" impressions, "+r(i.clicks??0)+" clicks ",1))),128)),!o(u)||o(u).length===0?(l(),c("li",H,"No data")):h("",!0)])]),a("div",K,[s[5]||(s[5]=a("h4",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Top Traffic Sources",-1)),a("ul",W,[(l(!0),c(_,null,k(n.value,(i,p)=>(l(),c("li",{key:p},r(i.utm_source??"—")+": "+r(i.lead_count??0)+" leads ",1))),128)),!n.value||n.value.length===0?(l(),c("li",X,"No data")):h("",!0)])])]),a("div",Y,[s[6]||(s[6]=a("h4",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Conversion Funnel (raw)",-1)),a("pre",Z,r(JSON.stringify(o(d),null,2)),1)])]))}}),at={class:"p-6 space-y-6"},xt=C({__name:"Index",props:{stats:{type:Object,required:!1}},setup(b){const y=m("Analytics"),e=m({text:"#374151",grid:"rgba(0,0,0,0.06)"}),u=()=>{document.documentElement.classList.contains("dark")?(e.value.text="#E5E7EB",e.value.grid="rgba(255,255,255,0.06)"):(e.value.text="#374151",e.value.grid="rgba(0,0,0,0.06)")};let g=null;A(()=>{u(),g=new MutationObserver(()=>u()),g.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),L(()=>{g&&g.disconnect()});const d=m([]),n=m([]),x=m({});v(()=>({labels:d.value.map(t=>t.date),datasets:[{label:"Impressions",backgroundColor:"#3b82f6",data:d.value.map(t=>t.impressions)},{label:"Clicks",backgroundColor:"#16a34a",data:d.value.map(t=>t.clicks)}]})),v(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:e.value.text}},title:{display:!1,color:e.value.text},tooltip:{titleColor:e.value.text,bodyColor:e.value.text}},scales:{x:{ticks:{color:e.value.text},grid:{color:e.value.grid}},y:{ticks:{color:e.value.text},grid:{color:e.value.grid}}}})),v(()=>({labels:n.value.map(t=>t.utm_source),datasets:[{backgroundColor:["#42A5F5","#66BB6A","#FFA726","#EF5350","#9C27B0","#FFC107"],data:n.value.map(t=>t.lead_count)}]})),v(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:e.value.text}},tooltip:{titleColor:e.value.text,bodyColor:e.value.text}}}));const s=m({totalLeads:0,convertedLeads:0,conversionRate:0,totalMarketingSpend:0,patientsAcquired:0,cpa:0,revenueGenerated:0,roi:0}),i=async()=>{try{const t=await f.get(route("admin.marketing-analytics.dashboard-data"));s.value=t.data}catch(t){console.error("Error fetching dashboard data:",t)}},p=async()=>{try{const t=await f.get(route("admin.marketing-analytics.campaign-performance"));d.value=t.data.data||[]}catch(t){console.error("Error fetching campaign performance:",t)}},w=async()=>{try{const t=await f.get(route("admin.marketing-analytics.traffic-source-distribution"));n.value=t.data||[]}catch(t){console.error("Error fetching traffic source distribution:",t)}},S=async()=>{try{const t=await f.get(route("admin.marketing-analytics.conversion-funnel"));x.value=t.data||{}}catch(t){console.error("Error fetching conversion funnel:",t)}};return B(y,t=>{t==="Analytics"&&(i(),p(),w(),S())},{immediate:!0}),(t,et)=>(l(),R(F,null,{default:P(()=>[D(o(T),{title:"Dashboard"}),a("div",at,[a("div",null,[D(tt,{dashboardStats:s.value,campaignPerformanceData:d.value,trafficSourceData:n.value,conversionFunnelData:x.value},null,8,["dashboardStats","campaignPerformanceData","trafficSourceData","conversionFunnelData"])])])]),_:1}))}});export{xt as default};
