import{d as h,x as b,f as k,c as o,o as r,a as l,u as n,g as v,w,b as t,i as u,F as m,r as P,t as i,e as S}from"./app-B9ZmK4zT.js";import{D as C,_ as D}from"./AppLayout.vue_vue_type_style_index_0_lang-15zqV9G-.js";import{C as $,p as E,a as N,b as B,B as V,c as F,L as A,d as L}from"./index-CZifJLne.js";import"./index-C8zLWs5I.js";import"./Input.vue_vue_type_script_setup_true_lang-CMAL6YUg.js";import"./createContext-fsEdSFMX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-KsBcTmDK.js";import"./RovingFocusGroup-CCdiS5NK.js";import"./_plugin-vue_export-helper-BpSdtWAT.js";import"./format-BigqMyrM.js";const T={class:"p-6 space-y-6"},U={class:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg"},W={class:"w-full text-left text-sm text-gray-800 dark:text-gray-200"},I={class:"px-6 py-4 font-medium"},O={class:"px-6 py-4 text-center"},R={class:"px-6 py-4 text-center"},q={class:"px-6 py-4 text-center"},H={class:"px-6 py-4 font-semibold text-green-600"},M={class:"px-6 py-4 text-right"},j=["onClick","disabled"],z={key:1,class:"text-xs text-gray-400"},G={key:0},J={key:0,class:"p-4 bg-white dark:bg-gray-900 rounded-lg shadow h-80"},nt=h({__name:"Index",props:{staffWithEarnings:{},performanceData:{}},setup(g){$.register(E,N,B,V,F,A);const p=g,y=[{title:"Dashboard",href:route("dashboard")},{title:"Staff Payouts",href:route("admin.staff-payouts.index")}],d=b({staff_id:null}),_=(a,s,e)=>{confirm(`Are you sure you want to process a payout of ${c(e)} for ${s}?`)&&d.transform(()=>({staff_id:a})).post(route("admin.staff-payouts.store"),{preserveScroll:!0})},c=a=>{const s=parseFloat(a||"0");return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)},x=k(()=>({labels:p.performanceData.map(a=>`${a.first_name} ${a.last_name}`),datasets:[{label:"Total Paid Earnings ($)",backgroundColor:"#16a34a",borderColor:"#16a34a",data:p.performanceData.map(a=>parseFloat(a.payouts_sum_total_amount||"0"))}]})),f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Staff Performance: Total Earnings Paid Out"}}};return(a,s)=>(r(),o(m,null,[l(n(v),{title:"Staff Payouts"}),l(D,{breadcrumbs:y},{default:w(()=>[t("div",T,[s[2]||(s[2]=t("div",{class:"rounded-lg bg-muted/40 p-4 shadow-sm"},[t("h1",{class:"text-xl font-semibold text-gray-800 dark:text-white"},"Staff Payouts & Performance"),t("p",{class:"text-sm text-muted-foreground"},"Review earnings, performance metrics, and process payments for staff.")],-1)),t("div",U,[t("table",W,[s[1]||(s[1]=t("thead",{class:"bg-gray-100 dark:bg-gray-800 text-xs uppercase text-muted-foreground"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Staff Member"),t("th",{class:"px-6 py-3 text-center"},"Unpaid Visits"),t("th",{class:"px-6 py-3 text-center"},"Patients Visited"),t("th",{class:"px-6 py-3 text-center"},"Hours Logged"),t("th",{class:"px-6 py-3"},"Total Unpaid Amount"),t("th",{class:"px-6 py-3 text-right"},"Actions")])],-1)),t("tbody",null,[(r(!0),o(m,null,P(a.staffWithEarnings,e=>(r(),o("tr",{key:e.id,class:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",I,i(e.first_name)+" "+i(e.last_name),1),t("td",O,i(e.unpaid_visits_count),1),t("td",R,i(e.unique_patients_count),1),t("td",q,i(e.total_hours_logged),1),t("td",H,i(c(e.total_unpaid_cost)),1),t("td",M,[e.unpaid_visits_count>0?(r(),o("button",{key:0,onClick:K=>_(e.id,`${e.first_name} ${e.last_name}`,e.total_unpaid_cost),disabled:n(d).processing&&n(d).staff_id===e.id,class:"inline-flex items-center gap-2 text-sm px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition disabled:opacity-50"},[l(n(C),{class:"h-4 w-4"}),S(" "+i(n(d).processing&&n(d).staff_id===e.id?"Processing...":"Process Payout"),1)],8,j)):(r(),o("span",z,"No pending payments"))])]))),128)),a.staffWithEarnings.length===0?(r(),o("tr",G,s[0]||(s[0]=[t("td",{colspan:"6",class:"text-center px-6 py-4 text-gray-400"},"No staff with unpaid visits found.",-1)]))):u("",!0)])])]),a.performanceData.length>0?(r(),o("div",J,[l(n(L),{data:x.value,options:f},null,8,["data"])])):u("",!0)])]),_:1})],64))}});export{nt as default};
