import{d as R,z as D,a8 as S,x as q,c as n,o as l,a as o,u as a,g as V,w as i,b as e,j as L,e as m,h as M,n as N,i as T,F as f,r as g,t as u,p as v,m as A,S as B,T as C}from"./app-B9ZmK4zT.js";import{_ as E}from"./AppLayout.vue_vue_type_style_index_0_lang-15zqV9G-.js";import{_ as $}from"./index-C8zLWs5I.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-CMAL6YUg.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-oMVbpI-U.js";import{_ as c}from"./InputError.vue_vue_type_script_setup_true_lang-rWuayl2c.js";import"./createContext-fsEdSFMX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-KsBcTmDK.js";import"./RovingFocusGroup-CCdiS5NK.js";import"./_plugin-vue_export-helper-BpSdtWAT.js";import"./format-BigqMyrM.js";const U={class:"space-y-6"},F={class:"rounded-xl border border-border bg-white p-6 shadow-sm dark:border-sidebar-border dark:bg-background"},H={class:"md:col-span-2"},j={class:"md:col-span-2"},z={class:"rounded-xl border border-border bg-white shadow-sm dark:border-sidebar-border dark:bg-background"},O={class:"p-5"},I={key:0,class:"overflow-x-auto"},P={class:"min-w-full text-left text-sm"},Y={class:"p-2"},G={class:"p-2"},J={class:"p-2"},K={class:"p-2"},Q={class:"p-2"},W={key:1,class:"py-10 text-center text-muted-foreground"},X={key:2,class:"mt-4 flex justify-end"},me=R({__name:"Index",props:{leaveRequests:{}},setup(Z){const x=[{title:"Dashboard",href:route("dashboard")},{title:"My Leave Requests",href:route("staff.leave-requests.index")}],p=()=>{C().props.inertia.visit(route("staff.leave-requests.index"),{preserveScroll:!0,preserveState:!0,only:["leaveRequests"]})};D(()=>{p(),window.addEventListener("focus",p)}),S(()=>{window.removeEventListener("focus",p)});const r=q({start_date:"",end_date:"",reason:""}),w=()=>{r.post(route("staff.leave-requests.store"),{preserveScroll:!0,onSuccess:()=>r.reset()})},b=d=>d?new Date(d).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A",h=d=>{switch(d){case"Approved":return"bg-green-100 text-green-800";case"Denied":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return(d,t)=>(l(),n(f,null,[o(a(V),{title:"My Leave Requests"}),o(E,{breadcrumbs:x},{default:i(()=>[e("div",U,[e("div",F,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"Request Time Off",-1)),t[8]||(t[8]=e("p",{class:"mt-1 text-sm text-muted-foreground"},"Fill out the form below to submit a new leave request.",-1)),e("form",{onSubmit:L(w,["prevent"]),class:"mt-6 grid grid-cols-1 gap-6 md:grid-cols-2"},[e("div",null,[o(a(_),{for:"start_date"},{default:i(()=>t[3]||(t[3]=[m("Start Date")])),_:1,__:[3]}),o(a(y),{id:"start_date",type:"date",modelValue:a(r).start_date,"onUpdate:modelValue":t[0]||(t[0]=s=>a(r).start_date=s)},null,8,["modelValue"]),o(c,{message:a(r).errors.start_date,class:"mt-2"},null,8,["message"])]),e("div",null,[o(a(_),{for:"end_date"},{default:i(()=>t[4]||(t[4]=[m("End Date")])),_:1,__:[4]}),o(a(y),{id:"end_date",type:"date",modelValue:a(r).end_date,"onUpdate:modelValue":t[1]||(t[1]=s=>a(r).end_date=s)},null,8,["modelValue"]),o(c,{message:a(r).errors.end_date,class:"mt-2"},null,8,["message"])]),e("div",H,[o(a(_),{for:"reason"},{default:i(()=>t[5]||(t[5]=[m("Reason (Optional)")])),_:1,__:[5]}),M(e("textarea",{id:"reason","onUpdate:modelValue":t[2]||(t[2]=s=>a(r).reason=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[N,a(r).reason]]),o(c,{message:a(r).errors.reason,class:"mt-2"},null,8,["message"])]),e("div",j,[o(a($),{type:"submit",disabled:a(r).processing},{default:i(()=>t[6]||(t[6]=[m("Submit Request")])),_:1,__:[6]},8,["disabled"])])],32)]),e("div",z,[t[11]||(t[11]=e("div",{class:"border-b p-5"},[e("h2",{class:"text-lg font-semibold"},"My Request History")],-1)),e("div",O,[d.leaveRequests.data.length>0?(l(),n("div",I,[e("table",P,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"p-2"},"Start Date"),e("th",{class:"p-2"},"End Date"),e("th",{class:"p-2"},"Reason"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Admin Notes")])],-1)),e("tbody",null,[(l(!0),n(f,null,g(d.leaveRequests.data,s=>(l(),n("tr",{key:s.id,class:"border-t"},[e("td",Y,u(b(s.start_date)),1),e("td",G,u(b(s.end_date)),1),e("td",J,u(s.reason||"N/A"),1),e("td",K,[e("span",{class:v(["rounded-full px-2 py-1 text-xs font-medium",h(s.status)])},u(s.status),3)]),e("td",Q,u(s.admin_notes||"N/A"),1)]))),128))])])])):(l(),n("div",W,t[10]||(t[10]=[e("p",null,"You have not submitted any leave requests.",-1)]))),d.leaveRequests.links.length>3?(l(),n("div",X,[(l(!0),n(f,null,g(d.leaveRequests.links,(s,k)=>(l(),A(a(B),{key:k,href:s.url||"#",class:v(["px-4 py-2 text-sm",{"font-bold text-primary":s.active,"text-muted-foreground":!s.active}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])):T("",!0)])])])]),_:1})],64))}});export{me as default};
