import{s as R,o as q,bP as D,u as V,f as n,g as l,i as o,j as r,k as S,w as i,l as e,x as L,n as m,p as M,v as N,q as E,F as f,m as g,t as u,K as v,E as A,z as B,W as C}from"./vendor-BwD25tKZ.js";import{_ as T}from"./AppLayout.vue_vue_type_style_index_0_lang-CvAaBbvn.js";import{_ as $}from"./index-CKGAZWQo.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-CECQSOSU.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-DzVq0Sz6.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-Dd9fxBHu.js";import"./charts-DOEJufVb.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-9XWwQ7Yt.js";import"./utils-CBfrqCZ4.js";import"./createContext-BqFVO7-m.js";import"./useForwardExpose-G3tvssmS.js";import"./constructNow-B9pLeBHj.js";import"./Primitive-BSXjhaNq.js";import"./format-BcfG6MxF.js";import"./VisuallyHidden-C1CaS35V.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CuMZ7Rul.js";import"./debounce-Cwa4SNQ2.js";import"./app-Bm08FwIe.js";const F={class:"space-y-6"},U={class:"rounded-xl border border-border bg-white p-6 shadow-sm dark:border-sidebar-border dark:bg-background"},H={class:"md:col-span-2"},P={class:"md:col-span-2"},j={class:"rounded-xl border border-border bg-white shadow-sm dark:border-sidebar-border dark:bg-background"},z={class:"p-5"},O={key:0,class:"overflow-x-auto"},I={class:"min-w-full text-left text-sm"},K={class:"p-2"},W={class:"p-2"},Y={class:"p-2"},G={class:"p-2"},J={class:"p-2"},Q={key:1,class:"py-10 text-center text-muted-foreground"},X={key:2,class:"mt-4 flex justify-end"},ve=R({__name:"Index",props:{leaveRequests:{}},setup(Z){const x=[{title:"Dashboard",href:route("dashboard")},{title:"My Leave Requests",href:route("staff.leave-requests.index")}],p=()=>{C().props.inertia.visit(route("staff.leave-requests.index"),{preserveScroll:!0,preserveState:!0,only:["leaveRequests"]})};q(()=>{p(),window.addEventListener("focus",p)}),D(()=>{window.removeEventListener("focus",p)});const a=V({start_date:"",end_date:"",reason:""}),w=()=>{a.post(route("staff.leave-requests.store"),{preserveScroll:!0,onSuccess:()=>a.reset()})},_=d=>d?new Date(d).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A",h=d=>{switch(d){case"Approved":return"bg-green-100 text-green-800";case"Denied":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return(d,t)=>(l(),n(f,null,[o(r(S),{title:"My Leave Requests"}),o(T,{breadcrumbs:x},{default:i(()=>[e("div",F,[e("div",U,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"Request Time Off",-1)),t[8]||(t[8]=e("p",{class:"mt-1 text-sm text-muted-foreground"},"Fill out the form below to submit a new leave request.",-1)),e("form",{onSubmit:L(w,["prevent"]),class:"mt-6 grid grid-cols-1 gap-6 md:grid-cols-2"},[e("div",null,[o(r(c),{for:"start_date"},{default:i(()=>[...t[3]||(t[3]=[m("Start Date",-1)])]),_:1}),o(r(y),{id:"start_date",type:"date",modelValue:r(a).start_date,"onUpdate:modelValue":t[0]||(t[0]=s=>r(a).start_date=s)},null,8,["modelValue"]),o(b,{message:r(a).errors.start_date,class:"mt-2"},null,8,["message"])]),e("div",null,[o(r(c),{for:"end_date"},{default:i(()=>[...t[4]||(t[4]=[m("End Date",-1)])]),_:1}),o(r(y),{id:"end_date",type:"date",modelValue:r(a).end_date,"onUpdate:modelValue":t[1]||(t[1]=s=>r(a).end_date=s)},null,8,["modelValue"]),o(b,{message:r(a).errors.end_date,class:"mt-2"},null,8,["message"])]),e("div",H,[o(r(c),{for:"reason"},{default:i(()=>[...t[5]||(t[5]=[m("Reason (Optional)",-1)])]),_:1}),M(e("textarea",{id:"reason","onUpdate:modelValue":t[2]||(t[2]=s=>r(a).reason=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[N,r(a).reason]]),o(b,{message:r(a).errors.reason,class:"mt-2"},null,8,["message"])]),e("div",P,[o(r($),{type:"submit",disabled:r(a).processing,class:"bg-cyan-600 hover:bg-cyan-700 text-white text-sm px-4 py-2 rounded-md transition"},{default:i(()=>[...t[6]||(t[6]=[m(" Submit Request ",-1)])]),_:1},8,["disabled"])])],32)]),e("div",j,[t[11]||(t[11]=e("div",{class:"border-b p-5"},[e("h2",{class:"text-lg font-semibold"},"My Request History")],-1)),e("div",z,[d.leaveRequests.data.length>0?(l(),n("div",O,[e("table",I,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"p-2"},"Start Date"),e("th",{class:"p-2"},"End Date"),e("th",{class:"p-2"},"Reason"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Admin Notes")])],-1)),e("tbody",null,[(l(!0),n(f,null,g(d.leaveRequests.data,s=>(l(),n("tr",{key:s.id,class:"border-t"},[e("td",K,u(_(s.start_date)),1),e("td",W,u(_(s.end_date)),1),e("td",Y,u(s.reason||"N/A"),1),e("td",G,[e("span",{class:v(["rounded-full px-2 py-1 text-xs font-medium",h(s.status)])},u(s.status),3)]),e("td",J,u(s.admin_notes||"N/A"),1)]))),128))])])])):(l(),n("div",Q,[...t[10]||(t[10]=[e("p",null,"You have not submitted any leave requests.",-1)])])),d.leaveRequests.links.length>3?(l(),n("div",X,[(l(!0),n(f,null,g(d.leaveRequests.links,(s,k)=>(l(),A(r(B),{key:k,href:s.url||"#",class:v(["px-4 py-2 text-sm",{"font-bold text-primary":s.active,"text-muted-foreground":!s.active}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])):E("",!0)])])])]),_:1})],64))}});export{ve as default};
