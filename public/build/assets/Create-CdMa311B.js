import{d as y,k as h,x,l as k,Q as S,c as d,o as a,a as c,u as o,g as D,w as V,b as t,i as I,h as r,F as p,r as b,t as u,v as C,j as P,s as N,n as v}from"./app-B9ZmK4zT.js";import{_ as B}from"./AppLayout.vue_vue_type_style_index_0_lang-15zqV9G-.js";import"./index-C8zLWs5I.js";import"./Input.vue_vue_type_script_setup_true_lang-CMAL6YUg.js";import"./createContext-fsEdSFMX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-KsBcTmDK.js";import"./RovingFocusGroup-CCdiS5NK.js";import"./_plugin-vue_export-helper-BpSdtWAT.js";import"./format-BigqMyrM.js";const M={class:"p-6 space-y-6"},U={class:"p-4 bg-white rounded-lg shadow"},T=["value"],j={class:"p-4 bg-white rounded-lg shadow space-y-4"},F={key:0,class:"text-center text-gray-500 py-4"},L={key:1,class:"space-y-2 border rounded-md p-2"},O=["value"],Q={class:"flex-1"},$={class:"font-mono"},E={class:"grid md:grid-cols-2 gap-4 pt-4 border-t"},G={class:"flex justify-end pt-4"},q=["disabled"],Z=y({__name:"Create",props:{patients:{},selectedPatientId:{},billableVisits:{}},setup(f){const m=f,g=[{title:"Dashboard",href:route("dashboard")},{title:"Invoices",href:route("admin.invoices.index")},{title:"Create",href:route("admin.invoices.create")}],n=h(m.selectedPatientId),i=x({patient_id:m.selectedPatientId,visit_ids:[],invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]});k(n,l=>{S.get(route("admin.invoices.create"),{patient_id:l},{preserveState:!0,replace:!0})});const _=()=>{i.post(route("admin.invoices.store"))};return(l,e)=>(a(),d(p,null,[c(o(D),{title:"Create Invoice"}),c(B,{breadcrumbs:g},{default:V(()=>[t("div",M,[e[9]||(e[9]=t("h1",{class:"text-xl font-semibold"},"Create New Invoice",-1)),t("div",U,[e[5]||(e[5]=t("label",{for:"patient",class:"block text-sm font-medium text-gray-700"},"Step 1: Select a Patient",-1)),r(t("select",{id:"patient","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),class:"mt-1 block w-full md:w-1/3 rounded-md border-gray-300 shadow-sm"},[e[4]||(e[4]=t("option",{disabled:"",value:""},"-- Select a Patient --",-1)),(a(!0),d(p,null,b(l.patients,s=>(a(),d("option",{key:s.id,value:s.id},u(s.full_name),9,T))),128))],512),[[C,n.value]])]),n.value?(a(),d("form",{key:0,onSubmit:P(_,["prevent"])},[t("div",j,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold"},"Step 2: Select Billable Visits",-1)),l.billableVisits.length===0?(a(),d("div",F," No billable visits found for this patient. ")):(a(),d("div",L,[(a(!0),d(p,null,b(l.billableVisits,s=>(a(),d("label",{key:s.id,class:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-md"},[r(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[1]||(e[1]=w=>o(i).visit_ids=w),class:"rounded"},null,8,O),[[N,o(i).visit_ids]]),t("span",Q,u(s.service_description||"Standard Visit")+" on "+u(new Date(s.scheduled_at).toLocaleDateString()),1),t("span",$,"$"+u(s.cost),1)]))),128))])),t("div",E,[t("div",null,[e[6]||(e[6]=t("label",{for:"invoice_date",class:"block text-sm font-medium"},"Invoice Date",-1)),r(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>o(i).invoice_date=s),id:"invoice_date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[v,o(i).invoice_date]])]),t("div",null,[e[7]||(e[7]=t("label",{for:"due_date",class:"block text-sm font-medium"},"Due Date",-1)),r(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o(i).due_date=s),id:"due_date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[v,o(i).due_date]])])]),t("div",G,[t("button",{type:"submit",disabled:o(i).processing||o(i).visit_ids.length===0,class:"px-4 py-2 bg-green-600 text-white rounded-md disabled:opacity-50"}," Generate Invoice ",8,q)])])],32)):I("",!0)])]),_:1})],64))}});export{Z as default};
