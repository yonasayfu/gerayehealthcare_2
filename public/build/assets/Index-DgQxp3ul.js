import{d as F,k as S,l as L,Q as h,x as P,c as d,o as i,a as u,u as r,g as I,w as B,b as e,i as b,e as g,h as m,F as y,r as C,t as n,v as c,n as k,p as z,j as M}from"./app-B9ZmK4zT.js";import{_ as Q}from"./AppLayout.vue_vue_type_style_index_0_lang-15zqV9G-.js";import{d as R}from"./debounce-DetcGv2t.js";import{c as U}from"./index-C8zLWs5I.js";import{A as w}from"./arrow-up-down-cz3aQ1NM.js";import{P as q}from"./pen-line-l5oGmSQv.js";import{T as G}from"./trash-2-CoGP5DlO.js";import"./Input.vue_vue_type_script_setup_true_lang-CMAL6YUg.js";import"./createContext-fsEdSFMX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-KsBcTmDK.js";import"./RovingFocusGroup-CCdiS5NK.js";import"./_plugin-vue_export-helper-BpSdtWAT.js";import"./format-BigqMyrM.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=U("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=U("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),K={class:"space-y-6 p-6"},O={class:"flex items-center justify-between"},W={class:"rounded-lg border border-border bg-white dark:bg-gray-900 p-4 shadow-sm"},X={class:"flex items-center gap-2 mb-4"},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Z=["value"],tt={class:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg"},et={class:"w-full text-left text-sm text-gray-800 dark:text-gray-200"},st={class:"bg-gray-100 dark:bg-gray-800 text-xs uppercase text-muted-foreground"},lt={class:"px-6 py-4"},rt={class:"px-6 py-4"},ot={class:"px-6 py-4"},at={class:"px-6 py-4"},dt={class:"px-6 py-4 text-right"},it={class:"inline-flex items-center justify-end space-x-2"},nt=["onClick"],ut=["onClick"],mt={key:0},ft={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg"},pt={class:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4"},bt=["value"],gt={key:0,class:"text-red-500 text-sm mt-1"},vt={key:0,class:"text-red-500 text-sm mt-1"},xt={key:0,class:"text-red-500 text-sm mt-1"},yt={key:0,class:"text-red-500 text-sm mt-1 p-3 bg-red-50 border border-red-200 rounded"},ct={class:"flex justify-end space-x-3 pt-4"},kt=["disabled"],jt=F({__name:"Index",props:{availabilities:{},filters:{},staffList:{}},setup(V){const f=V,$=[{title:"Dashboard",href:route("dashboard")},{title:"Staff Availabilities",href:route("admin.staff-availabilities.index")}],a=S({staff_id:f.filters.staff_id||"",status:f.filters.status||"",start_date:f.filters.start_date||"",end_date:f.filters.end_date||"",sort:f.filters.sort||"start_time",direction:f.filters.direction||"desc"});L(a,R(()=>{h.get(route("admin.staff-availabilities.index"),{...a.value},{preserveState:!0,replace:!0})},300),{deep:!0});const p=S(!1),v=S(!1),l=P({id:null,staff_id:"",status:"Available",start_time:"",end_time:""}),D=()=>{v.value=!1,l.reset(),p.value=!0},N=o=>{v.value=!0,l.id=o.id,l.staff_id=o.staff_id,l.status=o.status,l.start_time=o.start_time.slice(0,16),l.end_time=o.end_time.slice(0,16),p.value=!0},T=()=>{const o=()=>{p.value=!1,l.reset()};v.value?l.put(route("admin.staff-availabilities.update",l.id),{onSuccess:o}):l.post(route("admin.staff-availabilities.store"),{onSuccess:o})};function j(o){confirm("Are you sure you want to delete this availability slot?")&&h.delete(route("admin.staff-availabilities.destroy",o),{preserveScroll:!0})}function x(o){a.value.sort===o?a.value.direction=a.value.direction==="asc"?"desc":"asc":(a.value.sort=o,a.value.direction="asc")}const _=o=>o?`${o.first_name||""} ${o.last_name||""}`.trim():"N/A",A=o=>o?new Date(o).toLocaleString():"N/A";return(o,t)=>(i(),d(y,null,[u(r(I),{title:"Staff Availabilities"}),u(Q,{breadcrumbs:$},{default:B(()=>[e("div",K,[e("div",O,[t[15]||(t[15]=e("div",null,[e("h1",{class:"text-xl font-semibold text-gray-800 dark:text-white"},"Staff Availability Records"),e("p",{class:"text-sm text-muted-foreground"},"Review and manage all staff availability slots.")],-1)),e("button",{onClick:D,class:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg text-sm shadow-md"},[u(r(H),{class:"h-4 w-4"}),t[14]||(t[14]=g(" Add New Slot "))])]),e("div",W,[e("div",X,[u(r(J),{class:"h-5 w-5 text-muted-foreground"}),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold"},"Filters",-1))]),e("div",Y,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Staff Member",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.staff_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-800"},[t[17]||(t[17]=e("option",{value:""},"All Staff",-1)),(i(!0),d(y,null,C(o.staffList,s=>(i(),d("option",{key:s.id,value:s.id},n(_(s)),9,Z))),128))],512),[[c,a.value.staff_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-800"},t[19]||(t[19]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"Available"},"Available",-1),e("option",{value:"Unavailable"},"Unavailable",-1)]),512),[[c,a.value.status]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"From Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.start_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-800"},null,512),[[k,a.value.start_date]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"To Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.end_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-800"},null,512),[[k,a.value.end_date]])])])]),e("div",tt,[e("table",et,[e("thead",st,[e("tr",null,[e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[4]||(t[4]=s=>x("staff_id"))},[t[23]||(t[23]=g(" Staff Member ")),u(r(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[5]||(t[5]=s=>x("status"))},[t[24]||(t[24]=g(" Status ")),u(r(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[6]||(t[6]=s=>x("start_time"))},[t[25]||(t[25]=g(" Start Time ")),u(r(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[7]||(t[7]=s=>x("end_time"))},[t[26]||(t[26]=g(" End Time ")),u(r(w),{class:"inline w-4 h-4 ml-1"})]),t[27]||(t[27]=e("th",{class:"px-6 py-3 text-right"},"Actions",-1))])]),e("tbody",null,[(i(!0),d(y,null,C(o.availabilities.data,s=>(i(),d("tr",{key:s.id,class:"border-b dark:border-gray-700"},[e("td",lt,n(_(s.staff)),1),e("td",rt,[e("span",{class:z(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(s.status),3)]),e("td",ot,n(A(s.start_time)),1),e("td",at,n(A(s.end_time)),1),e("td",dt,[e("div",it,[e("button",{onClick:E=>N(s),class:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-blue-100",title:"Edit Slot"},[u(r(q),{class:"w-4 h-4 text-blue-600"})],8,nt),e("button",{onClick:E=>j(s.id),class:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-red-100",title:"Delete Slot"},[u(r(G),{class:"w-4 h-4 text-red-600"})],8,ut)])])]))),128)),o.availabilities.data.length===0?(i(),d("tr",mt,t[28]||(t[28]=[e("td",{colspan:"5",class:"text-center px-6 py-4 text-gray-400"},"No records found.",-1)]))):b("",!0)])])])]),p.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:t[13]||(t[13]=M(s=>p.value=!1,["self"]))},[e("div",ft,[e("h3",pt,n(v.value?"Edit":"Create")+" Availability Slot ",1),e("form",{onSubmit:M(T,["prevent"]),class:"space-y-4"},[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium"},"Staff Member",-1)),m(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>r(l).staff_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700"},[t[29]||(t[29]=e("option",{disabled:"",value:""},"Please select a staff member",-1)),(i(!0),d(y,null,C(o.staffList,s=>(i(),d("option",{key:s.id,value:s.id},n(_(s)),9,bt))),128))],512),[[c,r(l).staff_id]]),r(l).errors.staff_id?(i(),d("div",gt,n(r(l).errors.staff_id),1)):b("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>r(l).status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700"},t[31]||(t[31]=[e("option",null,"Available",-1),e("option",null,"Unavailable",-1)]),512),[[c,r(l).status]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium"},"Start Time",-1)),m(e("input",{type:"datetime-local","onUpdate:modelValue":t[10]||(t[10]=s=>r(l).start_time=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700"},null,512),[[k,r(l).start_time]]),r(l).errors.start_time?(i(),d("div",vt,n(r(l).errors.start_time),1)):b("",!0)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium"},"End Time",-1)),m(e("input",{type:"datetime-local","onUpdate:modelValue":t[11]||(t[11]=s=>r(l).end_time=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-700"},null,512),[[k,r(l).end_time]]),r(l).errors.end_time?(i(),d("div",xt,n(r(l).errors.end_time),1)):b("",!0)]),r(l).errors.error?(i(),d("div",yt,n(r(l).errors.error),1)):b("",!0),e("div",ct,[e("button",{onClick:t[12]||(t[12]=s=>p.value=!1),type:"button",class:"px-4 py-2 border rounded-md"},"Cancel"),e("button",{type:"submit",disabled:r(l).processing,class:"px-4 py-2 bg-green-600 text-white rounded-md disabled:opacity-50"},n(r(l).processing?"Saving...":"Save Slot"),9,kt)])],32)])])):b("",!0)]),_:1})],64))}});export{jt as default};
