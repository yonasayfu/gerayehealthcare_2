import{s as q,r as u,A as w,C as I,D as V,V as L,f as d,g as i,i as n,j as l,k as R,w as h,l as t,E as z,q as $,z as C,P as F,p as c,v as O,S as H,B as _,F as x,m as S,t as f,n as A,H as D,I as J,J as K,T as Q}from"./vendor-BwD25tKZ.js";import{c as W}from"./confirm-BCahKa7A.js";import{_ as X}from"./AppLayout.vue_vue_type_style_index_0_lang-CvAaBbvn.js";import{d as Y}from"./debounce-Cwa4SNQ2.js";import{_ as Z}from"./Pagination.vue_vue_type_script_setup_true_lang-DAC70Nby.js";import{f as ee}from"./format-BcfG6MxF.js";import"./charts-DOEJufVb.js";import"./constructNow-B9pLeBHj.js";import"./utils-CBfrqCZ4.js";import"./useForwardExpose-G3tvssmS.js";import"./Primitive-BSXjhaNq.js";import"./createContext-BqFVO7-m.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-9XWwQ7Yt.js";import"./VisuallyHidden-C1CaS35V.js";import"./index-CKGAZWQo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CuMZ7Rul.js";import"./app-Bm08FwIe.js";const te={class:"space-y-6 p-6 print:p-0 print:space-y-0"},se={class:"liquidGlass-wrapper print:hidden"},re={class:"liquidGlass-content flex items-center justify-between p-4 gap-4"},ae={class:"flex items-center gap-2 print:hidden"},ne={class:"flex flex-col md:flex-row justify-between items-center gap-4 print:hidden"},le={class:"search-glass relative w-full md:w-1/3"},ie={class:"flex flex-col md:flex-row gap-4 items-center print:hidden"},oe={class:"w-full md:w-1/3"},de=["value"],fe={class:"w-full md:w-1/3"},ue=["value"],pe={class:"w-full md:w-1/3"},me=["value"],ge={class:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg print:shadow-none print:rounded-none print:bg-transparent"},ve={class:"w-full text-left text-sm text-gray-800 dark:text-gray-200 print-table"},ye={class:"bg-gray-100 dark:bg-gray-800 text-xs uppercase text-muted-foreground print-table-header"},ce={class:"px-6 py-4"},xe={class:"px-6 py-4"},be={class:"px-6 py-4"},ke={class:"px-6 py-4"},we={class:"px-6 py-4 text-right print:hidden"},he={class:"inline-flex items-center justify-end space-x-2"},_e={key:0},Se={class:"hidden print:block text-center mt-4 text-sm text-gray-500 print-footer"},ze=q({__name:"Index",props:{assignments:{},filters:{}},setup(P){const o=P,N=[{title:"Dashboard",href:route("dashboard")},{title:"Event Staff Assignments",href:route("admin.event-staff-assignments.index")}],b=u(o.filters.search||""),p=u(o.filters.sort||""),m=u(o.filters.direction||"asc"),k=u(o.filters.per_page||5),g=u(o.filters.event_id??""),v=u(o.filters.staff_id??""),y=u(o.filters.role??""),G=w(()=>{const r=new Map;return o.assignments.data.forEach(e=>{const a=e.event_id,s=e.event?.title??e.event_title??`Event #${a}`;a!=null&&!r.has(a)&&r.set(a,s)}),Array.from(r.entries()).map(([e,a])=>({id:e,title:a}))}),j=w(()=>{const r=new Map;return o.assignments.data.forEach(e=>{const a=e.staff_id,s=e.staff?.full_name??(e.staff_first_name&&e.staff_last_name?`${e.staff_first_name} ${e.staff_last_name}`:`Staff #${a}`);a!=null&&!r.has(a)&&r.set(a,s)}),Array.from(r.entries()).map(([e,a])=>({id:e,name:a}))}),T=w(()=>{const r=new Set;return o.assignments.data.forEach(e=>{e.role&&r.add(e.role)}),Array.from(r.values())}),U=w(()=>ee(new Date,"PPP p"));I([b,p,m,k,g,v,y],Y(()=>{const r={search:b.value,direction:m.value,per_page:k.value};p.value&&(r.sort=p.value),g.value!==""&&(r.event_id=Number(g.value)),v.value!==""&&(r.staff_id=Number(v.value)),y.value&&(r.role=y.value),V.get(route("admin.event-staff-assignments.index"),r,{preserveState:!0,replace:!0})},500));async function B(r){await W({title:"Delete Event Staff Assignment",message:"Are you sure you want to delete this event staff assignment?",confirmText:"Delete",cancelText:"Cancel"})&&V.delete(route("admin.event-staff-assignments.destroy",r))}function E(r){p.value===r?m.value=m.value==="asc"?"desc":"asc":(p.value=r,m.value="asc")}function M(r,e=60){return r?r.length>e?`${r.slice(0,e)}â€¦`:r:""}return(r,e)=>{const a=L("Download");return i(),d(x,null,[n(l(R),{title:"Event Staff Assignments"}),n(X,{breadcrumbs:N},{default:h(()=>[t("div",te,[t("div",se,[e[15]||(e[15]=t("div",{class:"liquidGlass-inner-shine","aria-hidden":"true"},null,-1)),t("div",re,[e[14]||(e[14]=t("div",{class:"flex items-center gap-4"},[t("div",{class:"print:hidden"},[t("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},"Event Staff Assignments"),t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Manage event staff assignments")])],-1)),t("div",ae,[n(l(C),{href:r.route("admin.event-staff-assignments.create"),class:"btn-glass"},{default:h(()=>[...e[11]||(e[11]=[t("span",null,"Add Event Staff Assignment",-1)])]),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=s=>r.exportData("csv")),class:"btn-glass btn-glass-sm"},[n(a,{class:"icon"}),e[12]||(e[12]=t("span",{class:"hidden sm:inline"},"Export CSV",-1))]),t("button",{onClick:e[1]||(e[1]=(...s)=>r.printCurrentView&&r.printCurrentView(...s)),class:"btn-glass btn-glass-sm"},[n(l(F),{class:"icon"}),e[13]||(e[13]=t("span",{class:"hidden sm:inline"},"Print Current",-1))])])])]),t("div",ne,[t("div",le,[c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),type:"text",placeholder:"Search event staff assignments...",class:"shadow-sm bg-white border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full pl-3 pr-10 py-2.5 dark:bg-gray-800 dark:border-gray-700 dark:placeholder-gray-400 dark:text-gray-100 relative z-10"},null,512),[[O,b.value]]),n(l(H),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400 dark:text-gray-400 z-20"})]),t("div",null,[e[17]||(e[17]=t("label",{for:"perPage",class:"mr-2 text-sm text-gray-700 dark:text-gray-300"},"Pagination per page:",-1)),c(t("select",{id:"perPage","onUpdate:modelValue":e[3]||(e[3]=s=>k.value=s),class:"rounded-md border-gray-300 bg-white text-gray-900 sm:text-sm px-2 py-1 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"},[...e[16]||(e[16]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)])],512),[[_,k.value]])])]),t("div",ie,[t("div",oe,[e[19]||(e[19]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Event",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-800 dark:text-white"},[e[18]||(e[18]=t("option",{value:""},"All Events",-1)),(i(!0),d(x,null,S(G.value,s=>(i(),d("option",{key:s.id,value:s.id},f(s.title),9,de))),128))],512),[[_,g.value]])]),t("div",fe,[e[21]||(e[21]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Staff",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>v.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-800 dark:text-white"},[e[20]||(e[20]=t("option",{value:""},"All Staff",-1)),(i(!0),d(x,null,S(j.value,s=>(i(),d("option",{key:s.id,value:s.id},f(s.name),9,ue))),128))],512),[[_,v.value]])]),t("div",pe,[e[23]||(e[23]=t("label",{class:"block text-xs text-gray-600 mb-1"},"Role",-1)),c(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>y.value=s),class:"w-full rounded-md border-gray-300 dark:bg-gray-800 dark:text-white"},[e[22]||(e[22]=t("option",{value:""},"All Roles",-1)),(i(!0),d(x,null,S(T.value,s=>(i(),d("option",{key:s,value:s},f(s),9,me))),128))],512),[[_,y.value]])])]),t("div",ge,[e[30]||(e[30]=t("div",{class:"hidden print:block text-center mb-4 print:mb-2 print-header-content"},[t("img",{src:"/images/geraye_logo.jpeg",alt:"Geraye Logo",class:"print-logo"}),t("h1",{class:"font-bold text-gray-800 dark:text-white print-clinic-name"},"Geraye Home Care Services"),t("p",{class:"text-gray-600 dark:text-gray-400 print-document-title"},"Event Staff Assignments List (Current View)"),t("hr",{class:"my-3 border-gray-300 print:my-2"})],-1)),t("table",ve,[t("thead",ye,[t("tr",null,[t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[7]||(e[7]=s=>E("event_id"))},[e[24]||(e[24]=A(" Event ",-1)),n(l(D),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[8]||(e[8]=s=>E("staff_id"))},[e[25]||(e[25]=A(" Staff ",-1)),n(l(D),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[9]||(e[9]=s=>E("role"))},[e[26]||(e[26]=A(" Role ",-1)),n(l(D),{class:"inline w-4 h-4 ml-1 print:hidden"})]),e[27]||(e[27]=t("th",{class:"px-6 py-3"},"Notes",-1)),e[28]||(e[28]=t("th",{class:"px-6 py-3 text-right print:hidden"},"Actions",-1))])]),t("tbody",null,[(i(!0),d(x,null,S(r.assignments.data,s=>(i(),d("tr",{key:s.id,class:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 print-table-row"},[t("td",ce,f(s.event?.title??s.event_title??s.event_id),1),t("td",xe,f(s.staff?.full_name??(s.staff_first_name&&s.staff_last_name?`${s.staff_first_name} ${s.staff_last_name}`:s.staff_id)),1),t("td",be,f(s.role),1),t("td",ke,f(M(s.notes,60)),1),t("td",we,[t("div",he,[n(l(C),{href:r.route("admin.event-staff-assignments.show",r.item.id),class:"inline-flex items-center p-2 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"View Details"},{default:h(()=>[n(l(J),{class:"w-4 h-4"})]),_:1},8,["href"]),n(l(C),{href:r.route("admin.event-staff-assignments.edit",r.item.id),class:"inline-flex items-center p-2 rounded-md text-blue-600 hover:bg-blue-50 dark:text-blue-300 dark:hover:bg-gray-700",title:"Edit"},{default:h(()=>[n(l(K),{class:"w-4 h-4"})]),_:1},8,["href"]),t("button",{onClick:e[10]||(e[10]=Ee=>B(r.item.id)),class:"inline-flex items-center p-2 rounded-md text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-gray-700",title:"Delete"},[n(l(Q),{class:"w-4 h-4"})])])])]))),128)),r.assignments.data.length===0?(i(),d("tr",_e,[...e[29]||(e[29]=[t("td",{colspan:"5",class:"text-center px-6 py-4 text-gray-400"},"No event staff assignments found.",-1)])])):$("",!0)])])]),r.assignments.data.length>0?(i(),z(Z,{key:0,links:r.assignments.links,class:"mt-6 flex justify-center print:hidden"},null,8,["links"])):$("",!0),t("div",Se,[e[31]||(e[31]=t("hr",{class:"my-2 border-gray-300"},null,-1)),t("p",null,"Document Generated: "+f(U.value),1)])])]),_:1})],64)}}});export{ze as default};
