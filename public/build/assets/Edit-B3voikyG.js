import{s as f,u as h,a8 as g,C as b,f as y,g as x,i as l,j as s,k as v,w as p,l as n,x as w,z as E,n as C,t as P,F as k}from"./vendor-BwD25tKZ.js";import{_ as N}from"./AppLayout.vue_vue_type_style_index_0_lang-CvAaBbvn.js";import{_ as S}from"./Form.vue_vue_type_script_setup_true_lang-BZ61vBDg.js";import"./charts-DOEJufVb.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-9XWwQ7Yt.js";import"./utils-CBfrqCZ4.js";import"./createContext-BqFVO7-m.js";import"./useForwardExpose-G3tvssmS.js";import"./constructNow-B9pLeBHj.js";import"./Primitive-BSXjhaNq.js";import"./format-BcfG6MxF.js";import"./VisuallyHidden-C1CaS35V.js";import"./index-CKGAZWQo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CuMZ7Rul.js";import"./debounce-Cwa4SNQ2.js";import"./app-Bm08FwIe.js";import"./useEthiopianDate-D2L2aCHH.js";const W={class:"space-y-6 p-6"},j={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-sm p-6"},q={class:"flex justify-end gap-2 pt-2"},z=["disabled"],R=f({__name:"Edit",props:{corporateClients:{},insurancePolicies:{},patient:{}},setup(c){const e=c,u=[{title:"Dashboard",href:route("dashboard")},{title:"Patients",href:route("admin.patients.index")},{title:e.patient?.full_name??"Patient",href:route("admin.patients.show",e.patient?.id)},{title:"Edit"}],d=i=>i==null||i===""?null:Number(i),a=h({full_name:e.patient?.full_name??"",fayda_id:e.patient?.fayda_id??"",date_of_birth:e.patient?.date_of_birth??"",ethiopian_date_of_birth:e.patient?.ethiopian_date_of_birth??"",gender:e.patient?.gender??null,address:e.patient?.address??"",phone_number:e.patient?.phone_number??"",email:e.patient?.email??"",emergency_contact:e.patient?.emergency_contact??"",source:e.patient?.source??null,geolocation:e.patient?.geolocation??"",corporate_client_id:d(e.patient?.corporate_client_id??e.patient?.corporate_client?.id??null),policy_id:d(e.patient?.employee_insurance_records?.[0]?.policy_id??e.patient?.policy_id??null)}),o=g({});function m(i){const t=(i||"").replace(/\D+/g,"");if(!t)return"";if(t.startsWith("2519")&&t.length===12)return"0"+t.slice(3);if(t.startsWith("251")&&t.length>=12){const r=t.indexOf("9",3);if(r!==-1&&t.length-r>=9)return"0"+t.slice(r,r+9)}return t.length===9&&t.startsWith("9")?"0"+t:(t.length===10&&t.startsWith("09"),t)}b(()=>a.phone_number,i=>{const t=m(i);if(t&&t!==i&&(a.phone_number=t),!t){o.phone_number=void 0;return}const r=/^09\d{8}$/.test(t);o.phone_number=r?void 0:"Enter a valid Ethiopian phone number (e.g., 0912345678)"});function _(){o.phone_number||a.put(route("admin.patients.update",e.patient.id))}return(i,t)=>(x(),y(k,null,[l(s(v),{title:"Edit Patient"}),l(N,{breadcrumbs:u},{default:p(()=>[n("div",W,[t[1]||(t[1]=n("div",{class:"liquidGlass-wrapper print:hidden w-full rounded-t-lg"},[n("div",{class:"liquidGlass-inner-shine","aria-hidden":"true"}),n("div",{class:"liquidGlass-content flex items-center justify-between p-6"},[n("div",null,[n("h1",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Edit Patient"),n("p",{class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},"Update patient information below.")])])],-1)),n("div",j,[n("form",{onSubmit:w(_,["prevent"]),class:"space-y-4"},[l(S,{form:s(a),localErrors:o,corporateClients:e.corporateClients,insurancePolicies:e.insurancePolicies},null,8,["form","localErrors","corporateClients","insurancePolicies"]),n("div",q,[l(s(E),{href:i.route("admin.patients.index"),class:"btn-glass btn-glass-sm"},{default:p(()=>[...t[0]||(t[0]=[C(" Cancel ",-1)])]),_:1},8,["href"]),n("button",{type:"submit",disabled:s(a).processing,class:"btn-glass btn-glass-sm"},P(s(a).processing?"Saving...":"Save Changes"),9,z)])],32)])])]),_:1})],64))}});export{R as default};
