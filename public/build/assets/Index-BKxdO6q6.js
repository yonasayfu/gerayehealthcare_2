import{B as C,d as I,g as M,m as p,c as d,o as l,a as c,b as m,h as V,w as g,e as t,y as i,t as r,F as y,r as L,n as N,x as P,l as D,z as E,_ as A,s as B,i as F}from"./app-B0DqkaDV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=C("FilePenLineIcon",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]),T={class:"p-6 space-y-6"},z={key:0,class:"rounded-md bg-red-50 p-4"},S={class:"flex"},$={class:"ml-3"},Y={class:"mt-2 text-sm text-red-700"},j={class:"space-y-4"},R={key:0,class:"text-center text-gray-500 py-8"},U={class:"flex justify-between items-start"},q={class:"font-semibold text-primary"},G={class:"text-sm text-muted-foreground"},H={class:"border-t pt-3 flex justify-end"},J=["onClick","disabled"],K=["onClick","disabled"],W=I({__name:"Index",props:{visits:{}},setup(x){const b=x,h=M(()=>{var s;return((s=b.visits)==null?void 0:s.data)||[]}),_=[{title:"Dashboard",href:route("dashboard")},{title:"My Visits",href:route("staff.my-visits.index")}],a=p(null),o=p(null);function f(s,n){if(a.value=s.id,o.value=null,!navigator.geolocation){o.value="Geolocation is not supported by your browser.",a.value=null;return}navigator.geolocation.getCurrentPosition(e=>{const{latitude:u,longitude:v}=e.coords,w=route(`staff.my-visits.${n}`,s.id);B.post(w,{latitude:u,longitude:v},{preserveScroll:!0,onFinish:()=>{a.value=null}})},e=>{switch(e.code){case e.PERMISSION_DENIED:o.value="You must allow location access to check in/out.";break;case e.POSITION_UNAVAILABLE:o.value="Location information is unavailable.";break;case e.TIMEOUT:o.value="The request to get user location timed out.";break;default:o.value="An unknown error occurred.";break}a.value=null})}const k=s=>s?F(new Date(s),"MMM dd, yyyy, hh:mm a"):"N/A";return(s,n)=>(l(),d(y,null,[c(m(V),{title:"My Visits"}),c(A,{breadcrumbs:_},{default:g(()=>[t("div",T,[n[2]||(n[2]=t("div",{class:"rounded-lg bg-muted/40 p-4 shadow-sm"},[t("h1",{class:"text-xl font-semibold text-gray-800 dark:text-white"},"My Daily Visits"),t("p",{class:"text-sm text-muted-foreground"},"Your scheduled visits for today and the future.")],-1)),o.value?(l(),d("div",z,[t("div",S,[t("div",$,[n[0]||(n[0]=t("h3",{class:"text-sm font-medium text-red-800"},"Location Error",-1)),t("div",Y,[t("p",null,r(o.value),1)])])])])):i("",!0),t("div",j,[h.value.length===0?(l(),d("div",R," You have no assigned visits. ")):i("",!0),(l(!0),d(y,null,L(h.value,e=>(l(),d("div",{key:e.id,class:"rounded-lg border bg-white dark:bg-background p-4 shadow-sm space-y-3"},[t("div",U,[t("div",null,[t("p",q,r(e.patient.full_name),1),t("p",G,r(k(e.scheduled_at)),1)]),t("span",{class:N({"px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full":!0,"bg-yellow-100 text-yellow-800":e.status==="Pending","bg-blue-100 text-blue-800":e.status==="In Progress","bg-green-100 text-green-800":e.status==="Completed","bg-red-100 text-red-800":e.status==="Cancelled"})},r(e.status),3)]),t("div",H,[e.status==="Pending"?(l(),d("button",{key:0,onClick:u=>f(e,"check-in"),disabled:a.value===e.id,class:"inline-flex items-center px-4 py-2 bg-cyan-600 hover:bg-cyan-700 disabled:opacity-50 text-white rounded-md text-sm font-medium transition"},r(a.value===e.id?"Checking In...":"Check In"),9,J)):i("",!0),e.status==="In Progress"?(l(),d("button",{key:1,onClick:u=>f(e,"check-out"),disabled:a.value===e.id,class:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white rounded-md text-sm font-medium transition"},r(a.value===e.id?"Checking Out...":"Check Out"),9,K)):i("",!0),e.status==="Completed"&&!e.service_id?(l(),P(m(D),{key:2,href:s.route("staff.my-visits.report.create",{visit:e.id}),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-sm font-medium transition"},{default:g(()=>[c(m(O),{class:"h-4 w-4"}),n[1]||(n[1]=E(" File Visit Report ",-1))]),_:2,__:[1]},1032,["href"])):i("",!0)])]))),128))])])]),_:1})],64))}});export{W as default};
