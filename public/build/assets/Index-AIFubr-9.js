import{s as E,r as g,A as k,C as I,D as C,E as P,g as o,w,i as a,l as t,j as n,k as q,q as v,f as c,G as z,P as _,p as S,v as L,S as U,B as H,n as d,H as p,F as Y,m as J,t as i,z as $,I as K,J as O,T as Q}from"./vendor-BwD25tKZ.js";import{_ as R}from"./AppLayout.vue_vue_type_style_index_0_lang-CvAaBbvn.js";import{d as W}from"./debounce-Cwa4SNQ2.js";import{_ as X}from"./Pagination.vue_vue_type_script_setup_true_lang-DAC70Nby.js";import{f as V}from"./format-BcfG6MxF.js";import"./charts-DOEJufVb.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-9XWwQ7Yt.js";import"./utils-CBfrqCZ4.js";import"./createContext-BqFVO7-m.js";import"./useForwardExpose-G3tvssmS.js";import"./constructNow-B9pLeBHj.js";import"./Primitive-BSXjhaNq.js";import"./VisuallyHidden-C1CaS35V.js";import"./index-CKGAZWQo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CuMZ7Rul.js";import"./app-Bm08FwIe.js";const Z={class:"flex-1 space-y-4 p-6"},tt={class:"liquidGlass-wrapper print:hidden"},et={class:"liquidGlass-content flex items-center justify-between p-4 gap-4"},rt={class:"flex items-center gap-2 print:hidden"},st=["href"],at={class:"flex flex-col md:flex-row justify-between items-center gap-4 print:hidden"},nt={class:"search-glass relative w-full md:w-1/3"},it={class:"overflow-x-auto bg-white dark:bg-gray-800 shadow rounded-lg print:shadow-none print:rounded-none print:bg-transparent"},lt={class:"w-full text-left text-sm text-gray-800 dark:text-gray-100 print-table"},ot={class:"bg-gray-100 dark:bg-gray-700 text-xs uppercase text-gray-600 dark:text-gray-300 print-table-header"},dt={class:"px-6 py-4 text-gray-700 dark:text-gray-200"},pt={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},ut={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},gt={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},yt={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},mt={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},xt={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},ct={class:"px-6 py-4 text-gray-800 dark:text-gray-100"},ft={class:"px-6 py-4 text-right print:hidden"},bt={class:"inline-flex items-center justify-end space-x-2"},ht=["onClick"],vt={key:0},kt={key:1,class:"fixed inset-0 z-[60] flex items-center justify-center"},wt={key:2,class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300 print:hidden"},qt=E({__name:"Index",props:{patients:{},filters:{}},setup(A){const u=A;route("dashboard"),route("admin.patients.index");const f=g(u.filters?.search||""),y=g(u.filters?.sort||""),m=g(u.filters?.direction||"asc"),b=g(u.filters?.per_page||5);k(()=>V(new Date,"PPP p")),k(()=>V(new Date,"PPP"));const j=k(()=>(u.patients.current_page-1)*u.patients.per_page);I([f,y,m,b],W(()=>{const s={search:f.value,direction:m.value,per_page:b.value};y.value&&(s.sort=y.value),C.get(route("admin.patients.index"),s,{preserveState:!0,replace:!0})},500));const h=g(!1),x=g(null);function M(s){x.value=s,h.value=!0}function D(){h.value=!1,x.value=null}function F(){x.value&&C.delete(route("admin.patients.destroy",x.value),{onFinish:()=>{h.value=!1,x.value=null}})}function G(s,e=!1){const r={type:s};e&&(r.preview=!0),window.open(route("admin.patients.export",r),"_blank")}function N(){setTimeout(()=>window.print(),50)}const T=()=>{window.open(route("admin.patients.printAll",{preview:!0}),"_blank")};function l(s){y.value===s?m.value=m.value==="asc"?"desc":"asc":(y.value=s,m.value="asc")}return(s,e)=>(o(),P(R,null,{default:w(()=>[a(n(q),{title:"Patients"}),t("div",Z,[t("div",tt,[e[15]||(e[15]=t("div",{class:"liquidGlass-inner-shine","aria-hidden":"true"},null,-1)),t("div",et,[e[14]||(e[14]=t("div",{class:"flex items-center gap-4"},[t("div",{class:"print:hidden"},[t("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},"Patients"),t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Manage patient records")])],-1)),t("div",rt,[t("a",{href:s.route("admin.patients.create"),class:"btn-glass"},[...e[10]||(e[10]=[t("span",null,"Add Patient",-1)])],8,st),t("button",{onClick:e[0]||(e[0]=r=>G("csv")),class:"btn-glass btn-glass-sm"},[a(n(z),{class:"icon"}),e[11]||(e[11]=t("span",{class:"hidden sm:inline"},"Export CSV",-1))]),t("button",{onClick:N,class:"btn-glass btn-glass-sm"},[a(n(_),{class:"icon"}),e[12]||(e[12]=t("span",{class:"hidden sm:inline"},"Print Current",-1))]),t("button",{onClick:T,class:"btn-glass btn-glass-sm"},[a(n(_),{class:"icon"}),e[13]||(e[13]=t("span",{class:"hidden sm:inline"},"Print All",-1))])])])]),t("div",at,[t("div",nt,[S(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>f.value=r),type:"text",placeholder:"Search patients...",class:"shadow-sm bg-white border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full pl-3 pr-10 py-2.5 dark:bg-gray-800 dark:border-gray-700 dark:placeholder-gray-400 dark:text-gray-100 relative z-10"},null,512),[[L,f.value]]),a(n(U),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400 dark:text-gray-400 z-20"})]),t("div",null,[e[17]||(e[17]=t("label",{for:"perPage",class:"mr-2 text-sm text-gray-700 dark:text-gray-300"},"Per Page:",-1)),S(t("select",{id:"perPage","onUpdate:modelValue":e[2]||(e[2]=r=>b.value=r),class:"rounded-md border-gray-300 bg-white text-gray-900 sm:text-sm px-2 py-1 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700"},[...e[16]||(e[16]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)])],512),[[H,b.value]])])]),t("div",it,[e[28]||(e[28]=t("div",{class:"hidden print:block text-center mb-4 print:mb-2 print-header-content"},[t("img",{src:"/images/geraye_logo.jpeg",alt:"Geraye Logo",class:"print-logo"}),t("h1",{class:"font-bold text-gray-800 dark:text-white print-clinic-name"},"Geraye Home Care Services"),t("p",{class:"text-gray-600 dark:text-gray-400 print-document-title"},"Patient List (Current View)"),t("hr",{class:"my-3 border-gray-300 print:my-2"})],-1)),t("table",lt,[t("thead",ot,[t("tr",null,[e[25]||(e[25]=t("th",{class:"px-6 py-3"},"#",-1)),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[3]||(e[3]=r=>l("full_name"))},[e[18]||(e[18]=d(" Name ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[4]||(e[4]=r=>l("patient_code"))},[e[19]||(e[19]=d(" Patient Code ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[5]||(e[5]=r=>l("fayda_id"))},[e[20]||(e[20]=d(" Fayda ID ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[6]||(e[6]=r=>l("date_of_birth"))},[e[21]||(e[21]=d(" Age ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[7]||(e[7]=r=>l("gender"))},[e[22]||(e[22]=d(" Gender ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[8]||(e[8]=r=>l("phone_number"))},[e[23]||(e[23]=d(" Phone ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),t("th",{class:"px-6 py-3 cursor-pointer",onClick:e[9]||(e[9]=r=>l("source"))},[e[24]||(e[24]=d(" Source ",-1)),a(n(p),{class:"inline w-4 h-4 ml-1 print:hidden"})]),e[26]||(e[26]=t("th",{class:"px-6 py-3 text-right print:hidden"},"Actions",-1))])]),t("tbody",null,[(o(!0),c(Y,null,J(s.patients.data,(r,B)=>(o(),c("tr",{key:r.id,class:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 print-table-row"},[t("td",dt,i(j.value+B+1),1),t("td",pt,i(r.full_name),1),t("td",ut,i(r.patient_code??"-"),1),t("td",gt,i(r.fayda_id??"-"),1),t("td",yt,i(r.age!==void 0&&r.age!==null?r.age:r.date_of_birth?Math.max(0,new Date().getFullYear()-new Date(r.date_of_birth).getFullYear()-(new Date().getMonth()<new Date(r.date_of_birth).getMonth()||new Date().getMonth()===new Date(r.date_of_birth).getMonth()&&new Date().getDate()<new Date(r.date_of_birth).getDate()?1:0)):"-"),1),t("td",mt,i(r.gender??"-"),1),t("td",xt,i(r.phone_number??"-"),1),t("td",ct,i(r.source??"-"),1),t("td",ft,[t("div",bt,[a(n($),{href:s.route("admin.patients.show",r.id),class:"inline-flex items-center p-2 rounded-md text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",title:"View Details"},{default:w(()=>[a(n(K),{class:"w-4 h-4"})]),_:2},1032,["href"]),a(n($),{href:s.route("admin.patients.edit",r.id),class:"inline-flex items-center p-2 rounded-md text-blue-600 hover:bg-blue-50 dark:text-blue-300 dark:hover:bg-gray-700",title:"Edit"},{default:w(()=>[a(n(O),{class:"w-4 h-4"})]),_:2},1032,["href"]),t("button",{onClick:Dt=>M(r.id),class:"inline-flex items-center p-2 rounded-md text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-gray-700",title:"Delete"},[a(n(Q),{class:"w-4 h-4"})],8,ht)])])]))),128)),s.patients.data.length===0?(o(),c("tr",vt,[...e[27]||(e[27]=[t("td",{colspan:"9",class:"text-center px-6 py-4 text-gray-400 dark:text-gray-400"},"No patients found.",-1)])])):v("",!0)])])]),s.patients.data.length>0?(o(),P(X,{key:0,links:s.patients.links,class:"mt-6 flex justify-center print:hidden"},null,8,["links"])):v("",!0),h.value?(o(),c("div",kt,[t("div",{class:"absolute inset-0 bg-black/40",onClick:D,"aria-hidden":"true"}),t("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title",class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md mx-4 p-6"},[e[29]||(e[29]=t("h3",{id:"confirm-title",class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Delete Patient",-1)),e[30]||(e[30]=t("p",{class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},"Are you sure you want to delete this patient? This action cannot be undone.",-1)),t("div",{class:"mt-6 flex justify-end gap-2"},[t("button",{type:"button",onClick:D,class:"px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"},"Cancel"),t("button",{type:"button",onClick:F,class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700"},"Delete")])])])):v("",!0),s.patients.total?(o(),c("p",wt," Showing "+i(s.patients.from||0)+"–"+i(s.patients.to||0)+" of "+i(s.patients.total),1)):v("",!0)])]),_:1}))}});export{qt as default};
