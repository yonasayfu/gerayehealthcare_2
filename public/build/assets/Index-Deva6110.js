import{B as $,d as P,k as S,p as B,q as I,Q as U,x as z,c as d,o as i,a as u,u as l,g as Q,w as R,b as e,y as b,i as p,f as m,F as c,r as C,t as n,v,h as k,n as q,e as V,j as G}from"./app-Bi-ReHGZ.js";import{A as w}from"./arrow-up-down-_laHb8jA.js";import{P as H}from"./pen-line-B5gFu49T.js";import{T as J}from"./trash-2-Dd-0aVDL.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=$("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=$("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),W={class:"space-y-6 p-6"},X={class:"flex items-center justify-between"},Y={class:"rounded-lg border border-border bg-white dark:bg-gray-900 p-4 shadow-sm"},Z={class:"flex items-center gap-2 mb-4"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},et=["value"],st={class:"overflow-x-auto bg-white dark:bg-gray-900 shadow rounded-lg"},rt={class:"w-full text-left text-sm text-gray-800 dark:text-gray-200"},lt={class:"bg-gray-100 dark:bg-gray-800 text-xs uppercase text-muted-foreground"},at={class:"px-6 py-4"},ot={class:"px-6 py-4"},dt={class:"px-6 py-4"},it={class:"px-6 py-4"},nt={class:"px-6 py-4 text-right"},ut={class:"inline-flex items-center justify-end space-x-2"},mt=["onClick"],ft=["onClick"],gt={key:0},bt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl"},pt={class:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4"},yt=["value"],xt={key:0,class:"text-red-500 text-sm mt-1"},ct={key:0,class:"text-red-500 text-sm mt-1"},vt={key:0,class:"text-red-500 text-sm mt-1"},kt={key:0,class:"text-red-500 text-sm mt-1 p-3 bg-red-50 border border-red-200 rounded"},wt={class:"flex justify-end space-x-3 pt-4"},_t=["disabled"],Mt=P({__name:"Index",props:{availabilities:{},filters:{},staffList:{}},setup(D){var A,M;const f=D,N=[{title:"Dashboard",href:route("dashboard")},{title:"Staff Availabilities",href:route("admin.staff-availabilities.index")}],o=S({staff_id:f.filters.staff_id||"",status:f.filters.status||"",start_date:f.filters.start_date||"",end_date:f.filters.end_date||"",sort:f.filters.sort||"start_time",direction:f.filters.direction||"desc",per_page:((M=(A=f.availabilities)==null?void 0:A.meta)==null?void 0:M.per_page)||10});B(o,I(()=>{U.get(route("admin.staff-availabilities.index"),{...o.value},{preserveState:!0,replace:!0})},300),{deep:!0});const g=S(!1),y=S(!1),r=z({id:null,staff_id:"",status:"Available",start_time:"",end_time:""}),T=()=>{y.value=!1,r.reset(),g.value=!0},j=a=>{y.value=!0,r.id=a.id,r.staff_id=a.staff_id,r.status=a.status,r.start_time=a.start_time.slice(0,16),r.end_time=a.end_time.slice(0,16),g.value=!0},E=()=>{const a=()=>{g.value=!1,r.reset()};y.value?r.put(route("admin.staff-availabilities.update",r.id),{onSuccess:a}):r.post(route("admin.staff-availabilities.store"),{onSuccess:a})};function F(a){confirm("Are you sure you want to delete this availability slot?")&&U.delete(route("admin.staff-availabilities.destroy",a),{preserveScroll:!0})}function x(a){o.value.sort===a?o.value.direction=o.value.direction==="asc"?"desc":"asc":(o.value.sort=a,o.value.direction="asc")}const _=a=>a?`${a.first_name||""} ${a.last_name||""}`.trim():"N/A",h=a=>a?new Date(a).toLocaleString():"N/A";return(a,t)=>(i(),d(c,null,[u(l(Q),{title:"Staff Availabilities"}),u(G,{breadcrumbs:N},{default:R(()=>[e("div",W,[e("div",X,[t[15]||(t[15]=e("div",null,[e("h1",{class:"text-xl font-semibold text-gray-800 dark:text-white"},"Staff Availability Records"),e("p",{class:"text-sm text-muted-foreground"},"Review and manage all staff availability slots.")],-1)),e("button",{onClick:T,class:"inline-flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-4 py-2 rounded-lg text-sm shadow-md"},[u(l(K),{class:"h-4 w-4"}),t[14]||(t[14]=p(" Add New Slot "))])]),e("div",Y,[e("div",Z,[u(l(O),{class:"h-5 w-5 text-muted-foreground"}),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold"},"Filters",-1))]),e("div",tt,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Staff Member",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.staff_id=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},[t[17]||(t[17]=e("option",{value:""},"All Staff",-1)),(i(!0),d(c,null,C(a.staffList,s=>(i(),d("option",{key:s.id,value:s.id},n(_(s)),9,et))),128))],512),[[v,o.value.staff_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.status=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},t[19]||(t[19]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"Available"},"Available",-1),e("option",{value:"Unavailable"},"Unavailable",-1)]),512),[[v,o.value.status]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"From Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.start_date=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},null,512),[[k,o.value.start_date]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"To Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.end_date=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},null,512),[[k,o.value.end_date]])])])]),e("div",st,[e("table",rt,[e("thead",lt,[e("tr",null,[e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[4]||(t[4]=s=>x("staff_id"))},[t[23]||(t[23]=p(" Staff Member ")),u(l(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[5]||(t[5]=s=>x("status"))},[t[24]||(t[24]=p(" Status ")),u(l(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[6]||(t[6]=s=>x("start_time"))},[t[25]||(t[25]=p(" Start Time ")),u(l(w),{class:"inline w-4 h-4 ml-1"})]),e("th",{class:"px-6 py-3 cursor-pointer",onClick:t[7]||(t[7]=s=>x("end_time"))},[t[26]||(t[26]=p(" End Time ")),u(l(w),{class:"inline w-4 h-4 ml-1"})]),t[27]||(t[27]=e("th",{class:"px-6 py-3 text-right"},"Actions",-1))])]),e("tbody",null,[(i(!0),d(c,null,C(a.availabilities.data,s=>(i(),d("tr",{key:s.id,class:"border-b dark:border-gray-700"},[e("td",at,n(_(s.staff)),1),e("td",ot,[e("span",{class:q(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(s.status),3)]),e("td",dt,n(h(s.start_time)),1),e("td",it,n(h(s.end_time)),1),e("td",nt,[e("div",ut,[e("button",{onClick:L=>j(s),class:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-blue-100",title:"Edit Slot"},[u(l(H),{class:"w-4 h-4 text-blue-600"})],8,mt),e("button",{onClick:L=>F(s.id),class:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-red-100",title:"Delete Slot"},[u(l(J),{class:"w-4 h-4 text-red-600"})],8,ft)])])]))),128)),a.availabilities.data.length===0?(i(),d("tr",gt,t[28]||(t[28]=[e("td",{colspan:"5",class:"text-center px-6 py-4 text-gray-400"},"No records found.",-1)]))):b("",!0)])])])]),g.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.5)"},onClick:t[13]||(t[13]=V(s=>g.value=!1,["self"]))},[e("div",bt,[e("h3",pt,n(y.value?"Edit":"Create")+" Availability Slot ",1),e("form",{onSubmit:V(E,["prevent"]),class:"space-y-4"},[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Staff Member",-1)),m(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l(r).staff_id=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},[t[29]||(t[29]=e("option",{disabled:"",value:""},"Please select a staff member",-1)),(i(!0),d(c,null,C(a.staffList,s=>(i(),d("option",{key:s.id,value:s.id},n(_(s)),9,yt))),128))],512),[[v,l(r).staff_id]]),l(r).errors.staff_id?(i(),d("div",xt,n(l(r).errors.staff_id),1)):b("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>l(r).status=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},t[31]||(t[31]=[e("option",null,"Available",-1),e("option",null,"Unavailable",-1)]),512),[[v,l(r).status]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Start Time",-1)),m(e("input",{type:"datetime-local","onUpdate:modelValue":t[10]||(t[10]=s=>l(r).start_time=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},null,512),[[k,l(r).start_time]]),l(r).errors.start_time?(i(),d("div",ct,n(l(r).errors.start_time),1)):b("",!0)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"End Time",-1)),m(e("input",{type:"datetime-local","onUpdate:modelValue":t[11]||(t[11]=s=>l(r).end_time=s),class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5"},null,512),[[k,l(r).end_time]]),l(r).errors.end_time?(i(),d("div",vt,n(l(r).errors.end_time),1)):b("",!0)]),l(r).errors.error?(i(),d("div",kt,n(l(r).errors.error),1)):b("",!0),e("div",wt,[e("button",{onClick:t[12]||(t[12]=s=>g.value=!1),type:"button",class:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100"},"Cancel"),e("button",{type:"submit",disabled:l(r).processing,class:"px-4 py-2 bg-cyan-600 text-white rounded-md disabled:opacity-50 hover:bg-cyan-700"},n(l(r).processing?"Saving...":"Save Slot"),9,_t)])],32)])])):b("",!0)]),_:1})],64))}});export{Mt as default};
