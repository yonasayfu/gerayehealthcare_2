import{r as v,A as I,bq as M,br as K,bs as $,bt as z,bu as W,bv as Y,C as _,a1 as Q,R as X,_ as J,s as S,Q as k,h as C,a5 as q,bp as Z,bo as ee,a2 as te,bw as ne,a6 as ae,E as D,g as L,w as P,i as oe,j as N,X as V}from"./vendor-BwD25tKZ.js";import{r as re,S as O,P as j}from"./Primitive-BSXjhaNq.js";import{c as B}from"./createContext-BqFVO7-m.js";function R(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const[ie,Ne]=B("ConfigProvider");function se(t){const e=ie({dir:v("ltr")});return I(()=>t?.value||e.dir?.value||"ltr")}function ue(t){const e=M(),o=e?.type.emits,n={};return o?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),o?.forEach(r=>{n[K($(r))]=(...l)=>t(r,...l)}),n}function le(t){const e=M(),o=Object.keys(e?.type.props??{}).reduce((r,l)=>{const s=(e?.type.props[l]).default;return s!==void 0&&(r[l]=s),r},{}),n=z(t);return I(()=>{const r={},l=e?.vnode.props??{};return Object.keys(l).forEach(s=>{r[$(s)]=l[s]}),Object.keys({...o,...r}).reduce((s,f)=>(n.value[f]!==void 0&&(s[f]=n.value[f]),s),{})})}function Se(t,e){const o=le(t),n=e?ue(e):{};return I(()=>({...o.value,...n}))}function Te(t,e="reka"){return`${e}-${W?.()}`}function ce(t,e){const o=v(t);function n(l){return e[o.value][l]??o.value}return{state:o,dispatch:l=>{o.value=n(l)}}}function de(t,e){const o=v({}),n=v("none"),r=v(t),l=t.value?"mounted":"unmounted";let s;const f=e.value?.ownerDocument.defaultView??Y,{state:p,dispatch:c}=ce(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=i=>{if(J){const u=new CustomEvent(i,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(u)}};_(t,async(i,u)=>{const g=u!==i;if(await Q(),g){const A=n.value,E=T(e.value);i?(c("MOUNT"),a("enter"),E==="none"&&a("after-enter")):E==="none"||E==="undefined"||o.value?.display==="none"?(c("UNMOUNT"),a("leave"),a("after-leave")):u&&A!==E?(c("ANIMATION_OUT"),a("leave")):(c("UNMOUNT"),a("after-leave"))}},{immediate:!0});const d=i=>{const u=T(e.value),g=u.includes(i.animationName),A=p.value==="mounted"?"enter":"leave";if(i.target===e.value&&g&&(a(`after-${A}`),c("ANIMATION_END"),!r.value)){const E=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",s=f?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=E)})}i.target===e.value&&u==="none"&&c("ANIMATION_END")},m=i=>{i.target===e.value&&(n.value=T(e.value))},h=_(e,(i,u)=>{i?(o.value=getComputedStyle(i),i.addEventListener("animationstart",m),i.addEventListener("animationcancel",d),i.addEventListener("animationend",d)):(c("ANIMATION_END"),s!==void 0&&f?.clearTimeout(s),u?.removeEventListener("animationstart",m),u?.removeEventListener("animationcancel",d),u?.removeEventListener("animationend",d))},{immediate:!0}),y=_(p,()=>{const i=T(e.value);n.value=p.value==="mounted"?i:"none"});return X(()=>{h(),y()}),{isPresent:I(()=>["mounted","unmountSuspended"].includes(p.value))}}function T(t){return t&&getComputedStyle(t).animationName||"none"}var _e=S({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:o}){const{present:n,forceMount:r}=k(t),l=v(),{isPresent:s}=de(n,l);o({present:s});let f=e.default({present:s.value});f=re(f||[]);const p=M();if(f&&f?.length>1){const c=p?.parent?.type.name?`<${p.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(a=>`  - ${a}`).join(`
`)].join(`
`))}return()=>r.value||n.value||s.value?C(e.default({present:s.value})[0],{ref:c=>{const a=q(c);return typeof a?.hasAttribute>"u"||(a?.hasAttribute("data-reka-popper-content-wrapper")?l.value=a.firstElementChild:l.value=a),a}}):null}});function x(){const t=v(),e=I(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:q(t));return{primitiveElement:t,currentElement:e}}const U="data-reka-collection-item";function fe(t={}){const{key:e="",isProvider:o=!1}=t,n=`${e}CollectionProvider`;let r;if(o){const a=v(new Map);r={collectionRef:v(),itemMap:a},Z(n,r)}else r=ee(n);const l=(a=!1)=>{const d=r.collectionRef.value;if(!d)return[];const m=Array.from(d.querySelectorAll(`[${U}]`)),y=Array.from(r.itemMap.value.values()).sort((w,i)=>m.indexOf(w.ref)-m.indexOf(i.ref));return a?y:y.filter(w=>w.ref.dataset.disabled!=="")},s=S({name:"CollectionSlot",setup(a,{slots:d}){const{primitiveElement:m,currentElement:h}=x();return _(h,()=>{r.collectionRef.value=h.value}),()=>C(O,{ref:m},d)}}),f=S({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(a,{slots:d,attrs:m}){const{primitiveElement:h,currentElement:y}=x();return te(w=>{if(y.value){const i=ne(y.value);r.itemMap.value.set(i,{ref:y.value,value:a.value}),w(()=>r.itemMap.value.delete(i))}}),()=>C(O,{...m,[U]:"",ref:h},d)}}),p=I(()=>Array.from(r.itemMap.value.values())),c=I(()=>r.itemMap.value.size);return{getItems:l,reactiveItems:p,itemMapSize:c,CollectionSlot:s,CollectionItem:f}}const me="rovingFocusGroup.onEntryFocus",pe={bubbles:!1,cancelable:!0},ve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function he(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ce(t,e,o){const n=he(t.key,o);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ve[n]}function ye(t,e=!1){const o=R();for(const n of t)if(n===o||(n.focus({preventScroll:e}),R()!==o))return}function Pe(t,e){return t.map((o,n)=>t[(e+n)%t.length])}const[Me,ge]=B("RovingFocusGroup");var Ee=S({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:o}){const n=t,r=o,{loop:l,orientation:s,dir:f}=k(n),p=se(f),c=ae(n,"currentTabStopId",r,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),a=v(!1),d=v(!1),m=v(0),{getItems:h,CollectionSlot:y}=fe({isProvider:!0});function w(u){const g=!d.value;if(u.currentTarget&&u.target===u.currentTarget&&g&&!a.value){const A=new CustomEvent(me,pe);if(u.currentTarget.dispatchEvent(A),r("entryFocus",A),!A.defaultPrevented){const E=h().map(b=>b.ref).filter(b=>b.dataset.disabled!==""),F=E.find(b=>b.getAttribute("data-active")===""),G=E.find(b=>b.id===c.value),H=[F,G,...E].filter(Boolean);ye(H,n.preventScrollOnEntryFocus)}}d.value=!1}function i(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),ge({loop:l,dir:p,orientation:s,currentTabStopId:c,onItemFocus:u=>{c.value=u},onItemShiftTab:()=>{a.value=!0},onFocusableItemAdd:()=>{m.value++},onFocusableItemRemove:()=>{m.value--}}),(u,g)=>(L(),D(N(y),null,{default:P(()=>[oe(N(j),{tabindex:a.value||m.value===0?-1:0,"data-orientation":N(s),as:u.as,"as-child":u.asChild,dir:N(p),style:{outline:"none"},onMousedown:g[0]||(g[0]=A=>d.value=!0),onMouseup:i,onFocus:w,onBlur:g[1]||(g[1]=A=>a.value=!1)},{default:P(()=>[V(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Fe=Ee,Ae=S({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,o)=>(L(),D(N(j),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:P(()=>[V(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),Oe=Ae;export{_e as P,Fe as R,Oe as V,ue as a,se as b,fe as c,Se as d,le as e,Me as f,R as g,Ce as h,ie as i,ye as j,x as k,Te as u,Pe as w};
