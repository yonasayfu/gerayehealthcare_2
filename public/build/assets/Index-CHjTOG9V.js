import{A as j,d as T,k as g,l as z,Q as O,x as E,H as F,c as r,o as n,a as d,u as s,g as Y,w as i,b as t,i as q,j as V,v as Q,s as f,q as k,F as y,p,r as H,t as u,n as G,a1 as h,_ as J,D as K}from"./app-CKJLXAx0.js";import{_ as W}from"./Label.vue_vue_type_script_setup_true_lang-BfEZd0Od.js";import{_ as X,a as Z,b as ee,c as te,d as se,e as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DHhm0UtS.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=j("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=j("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),oe={class:"rounded-xl bg-white shadow-sm dark:border-sidebar-border dark:bg-background"},ne={class:"p-5"},le={class:"flex flex-col md:flex-row justify-between items-center gap-4 mb-4"},re={class:"relative w-full md:w-1/3"},de={class:"flex items-center gap-2"},ie={key:0,class:"overflow-x-auto"},ue={class:"min-w-full text-left text-sm"},fe={class:"flex items-center"},me={class:"flex items-center"},pe={class:"flex items-center"},ce={class:"p-2"},ve={class:"p-2"},_e={class:"p-2"},ge={class:"p-2"},ke={class:"p-2 text-right"},ye={key:0,class:"flex justify-end gap-2"},be={key:1,class:"text-xs text-muted-foreground"},xe={key:1,class:"py-10 text-center text-muted-foreground"},we={class:"flex justify-between items-center mt-4"},he={key:0},Ce={key:1},Re={class:"py-4"},De={key:0,class:"text-red-500 text-xs mt-1"},qe=T({__name:"Index",props:{leaveRequests:{},filters:{}},setup(U){const b=U,B=[{title:"Dashboard",href:route("dashboard")},{title:"Leave Requests",href:route("admin.admin-leave-requests.index")}],x=g(b.filters.search||""),c=g(b.filters.sort_by),m=g(b.filters.sort_order),C=g(b.filters.per_page||10);let R=null;z(x,a=>{R&&clearTimeout(R),R=setTimeout(()=>{A()},300)});const A=a=>{O.get(route("admin.admin-leave-requests.index"),{search:x.value,sort_by:c.value,sort_order:m.value,per_page:C.value},{preserveState:!0,preserveScroll:!0,only:["leaveRequests","filters"]})},D=a=>{const w={staff_member:"staff_first_name",dates_requested:"start_date",status:"status"}[a]||a;c.value===w?m.value=m.value==="asc"?"desc":"asc":(c.value=w,m.value="asc"),A()},v=g(!1),_=g(null),l=E({status:"",admin_notes:""}),I=(a,e)=>{_.value=a,l.status=e,l.admin_notes=a.admin_notes||"",v.value=!0},M=()=>{if(!_.value){console.error("ERROR: No selectedRequest.value. Dialog should not have been confirmed without one."),v.value=!1;return}l.put(route("admin.admin-leave-requests.update",_.value.id),{preserveScroll:!0,onSuccess:a=>{v.value=!1,l.reset()},onError:a=>{console.error("--- Inertia PUT request FAILED! ---"),console.error("Errors:",a),a&&Object.keys(a).length>0?alert("Validation failed: "+Object.values(a).join(`
`)):alert("An unknown error occurred during update. Check console and network tab.")},onFinish:()=>{}})},L=a=>a?new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A",N=a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Denied":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return(a,e)=>{const w=F("Pagination");return n(),r(y,null,[d(s(Y),{title:"Leave Requests Management"}),d(J,{breadcrumbs:B},{default:i(()=>[t("div",oe,[e[19]||(e[19]=t("div",{class:"border-b p-5"},[t("h2",{class:"text-lg font-semibold"},"Staff Leave Requests"),t("p",{class:"mt-1 text-sm text-muted-foreground"},"Review and manage all time-off requests from staff.")],-1)),t("div",ne,[t("div",le,[t("div",re,[q(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),placeholder:"Search by staff name, reason, or status...",class:"form-input w-full rounded-md border border-gray-300 pl-10 pr-4 py-2 text-sm shadow-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-900 dark:text-gray-100"},null,512),[[V,x.value]]),e[8]||(e[8]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1012 19.5a7.5 7.5 0 004.65-1.85z"})],-1))]),t("div",de,[e[10]||(e[10]=t("label",{for:"per-page",class:"text-sm text-gray-600 dark:text-gray-400"},"Per Page:",-1)),q(t("select",{id:"per-page","onUpdate:modelValue":e[1]||(e[1]=o=>C.value=o),class:"form-select rounded-md shadow-sm text-sm"},e[9]||(e[9]=[t("option",{value:"10"},"10",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),512),[[Q,C.value]])])]),a.leaveRequests.data.length>0?(n(),r("div",ie,[t("table",ue,[t("thead",null,[t("tr",null,[t("th",{class:"p-2 cursor-pointer select-none",onClick:e[2]||(e[2]=o=>D("staff_member"))},[t("div",fe,[e[11]||(e[11]=f(" Staff Member ")),c.value==="staff_first_name"?(n(),r(y,{key:0},[m.value==="asc"?(n(),p(s(S),{key:0,class:"h-4 w-4 ml-1"})):(n(),p(s($),{key:1,class:"h-4 w-4 ml-1"}))],64)):k("",!0)])]),t("th",{class:"p-2 cursor-pointer select-none",onClick:e[3]||(e[3]=o=>D("dates_requested"))},[t("div",me,[e[12]||(e[12]=f(" Dates Requested ")),c.value==="start_date"?(n(),r(y,{key:0},[m.value==="asc"?(n(),p(s(S),{key:0,class:"h-4 w-4 ml-1"})):(n(),p(s($),{key:1,class:"h-4 w-4 ml-1"}))],64)):k("",!0)])]),e[14]||(e[14]=t("th",{class:"p-2"},"Reason",-1)),t("th",{class:"p-2 cursor-pointer select-none",onClick:e[4]||(e[4]=o=>D("status"))},[t("div",pe,[e[13]||(e[13]=f(" Status ")),c.value==="status"?(n(),r(y,{key:0},[m.value==="asc"?(n(),p(s(S),{key:0,class:"h-4 w-4 ml-1"})):(n(),p(s($),{key:1,class:"h-4 w-4 ml-1"}))],64)):k("",!0)])]),e[15]||(e[15]=t("th",{class:"p-2 text-right"},"Actions",-1))])]),t("tbody",null,[(n(!0),r(y,null,H(a.leaveRequests.data,o=>(n(),r("tr",{key:o.id,class:"border-t"},[t("td",ce,u(o.staff.first_name)+" "+u(o.staff.last_name),1),t("td",ve,u(L(o.start_date))+" - "+u(L(o.end_date)),1),t("td",_e,u(o.reason||"N/A"),1),t("td",ge,[t("span",{class:G(["rounded-full px-2 py-1 text-xs font-medium",N(o.status)])},u(o.status),3)]),t("td",ke,[o.status==="Pending"?(n(),r("div",ye,[d(s(h),{variant:"outline",size:"sm",onClick:P=>I(o,"Approved")},{default:i(()=>e[16]||(e[16]=[f("Approve")])),_:2,__:[16]},1032,["onClick"]),d(s(h),{variant:"destructive",size:"sm",onClick:P=>I(o,"Denied")},{default:i(()=>e[17]||(e[17]=[f("Deny")])),_:2,__:[17]},1032,["onClick"])])):(n(),r("span",be,"Reviewed"))])]))),128))])])])):(n(),r("div",xe,e[18]||(e[18]=[t("p",null,"There are no leave requests to review.",-1)]))),t("div",we,[a.leaveRequests.data.length>0?(n(),p(w,{key:0,links:a.leaveRequests.links},null,8,["links"])):k("",!0)])])]),d(s(X),{open:v.value,"onUpdate:open":e[7]||(e[7]=o=>v.value=o)},{default:i(()=>[d(s(Z),null,{default:i(()=>[d(s(ee),null,{default:i(()=>[d(s(te),null,{default:i(()=>[f("Confirm Action: "+u(s(l).status)+" Request",1)]),_:1}),d(s(se),null,{default:i(()=>[_.value?(n(),r("span",he," You are about to "+u(s(l).status.toLowerCase())+" this leave request for **"+u(_.value.staff.first_name)+" "+u(_.value.staff.last_name)+"**. ",1)):(n(),r("span",Ce," You are about to "+u(s(l).status.toLowerCase())+" a leave request. ",1)),e[20]||(e[20]=f(" You can add an optional note below. "))]),_:1,__:[20]})]),_:1}),t("div",Re,[d(s(W),{for:"admin_notes"},{default:i(()=>e[21]||(e[21]=[f("Notes (Optional)")])),_:1,__:[21]}),q(t("textarea",{id:"admin_notes","onUpdate:modelValue":e[5]||(e[5]=o=>s(l).admin_notes=o),placeholder:"Reason for denial, etc.",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[V,s(l).admin_notes]]),s(l).errors.admin_notes?(n(),r("div",De,u(s(l).errors.admin_notes),1)):k("",!0)]),d(s(ae),null,{default:i(()=>[d(s(h),{variant:"outline",onClick:e[6]||(e[6]=o=>v.value=!1),disabled:s(l).processing},{default:i(()=>e[22]||(e[22]=[f("Cancel")])),_:1,__:[22]},8,["disabled"]),d(s(h),{onClick:M,disabled:s(l).processing},{default:i(()=>e[23]||(e[23]=[f("Confirm")])),_:1,__:[23]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64)}}}),Ie=K(qe,[["__scopeId","data-v-13546351"]]);export{Ie as default};
